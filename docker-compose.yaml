services:
  scrapify-client:
    build:
      context: D:\Coding\internship\restaurant_menu_card_data_extractor\client
    image: aashishpal09/scrapify-client
    container_name: scrapify-client
    env_file:
      - D:\Coding\internship\restaurant_menu_card_data_extractor\client\.env
    ports:
      - "3000:3000"


  scrapify-server:
    build:
      context: D:\Coding\internship\restaurant_menu_card_data_extractor\server
    image: aashishpal09/scrapify-server
    container_name: scrapify-server
    ports:
      - "5000:5000"
    env_file:
      - D:\Coding\internship\restaurant_menu_card_data_extractor\server\src\.env.prod
    depends_on:
      redis:
        condition: service_healthy

    healthcheck:
      test: [ "CMD", "curl","-f","http://localhost:5000" ]
      interval: 30s
      timeout: 10s
      retries: 3
    volumes:
      - ./logs:/app/server/src/logs